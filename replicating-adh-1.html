<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 17 Replicating ADH | An Introduction to R for Economics and Business Research</title>
  <meta name="description" content="Lecture notes on R for Programming Practices in Research in Economics." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 17 Replicating ADH | An Introduction to R for Economics and Business Research" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Lecture notes on R for Programming Practices in Research in Economics." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 17 Replicating ADH | An Introduction to R for Economics and Business Research" />
  
  <meta name="twitter:description" content="Lecture notes on R for Programming Practices in Research in Economics." />
  

<meta name="author" content="Julian Langer" />
<meta name="author" content="Lachlan Deer" />
<meta name="author" content="Ulrich Bergmann" />


<meta name="date" content="2021-09-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ggplot-solution.html"/>
<link rel="next" href="references.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introduction to R for Economics and Business </a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="part"><span><b>I Working with Data</b></span></li>
<li class="chapter" data-level="1" data-path="basics-of-r.html"><a href="basics-of-r.html"><i class="fa fa-check"></i><b>1</b> Basics of R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="basics-of-r.html"><a href="basics-of-r.html#the-workspace"><i class="fa fa-check"></i><b>1.1</b> The Workspace</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="basics-of-r.html"><a href="basics-of-r.html#working-directory"><i class="fa fa-check"></i><b>1.1.1</b> Working directory</a></li>
<li class="chapter" data-level="1.1.2" data-path="basics-of-r.html"><a href="basics-of-r.html#r-projects"><i class="fa fa-check"></i><b>1.1.2</b> R projects</a></li>
<li class="chapter" data-level="1.1.3" data-path="basics-of-r.html"><a href="basics-of-r.html#removing-and-adding-objects-from-workspace"><i class="fa fa-check"></i><b>1.1.3</b> Removing and adding objects from workspace</a></li>
<li class="chapter" data-level="1.1.4" data-path="basics-of-r.html"><a href="basics-of-r.html#installing-and-loading-packages"><i class="fa fa-check"></i><b>1.1.4</b> Installing and loading packages</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="basics-of-r.html"><a href="basics-of-r.html#vectors"><i class="fa fa-check"></i><b>1.2</b> Vectors</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="basics-of-r.html"><a href="basics-of-r.html#atomic-vector-types"><i class="fa fa-check"></i><b>1.2.1</b> Atomic vector types</a></li>
<li class="chapter" data-level="1.2.2" data-path="basics-of-r.html"><a href="basics-of-r.html#vector-coercion"><i class="fa fa-check"></i><b>1.2.2</b> Vector coercion</a></li>
<li class="chapter" data-level="1.2.3" data-path="basics-of-r.html"><a href="basics-of-r.html#vectors-with-multiple-values"><i class="fa fa-check"></i><b>1.2.3</b> Vectors with multiple values</a></li>
<li class="chapter" data-level="1.2.4" data-path="basics-of-r.html"><a href="basics-of-r.html#operating-with-vectors-and-recycling"><i class="fa fa-check"></i><b>1.2.4</b> Operating with vectors and recycling</a></li>
<li class="chapter" data-level="1.2.5" data-path="basics-of-r.html"><a href="basics-of-r.html#names"><i class="fa fa-check"></i><b>1.2.5</b> Names</a></li>
<li class="chapter" data-level="1.2.6" data-path="basics-of-r.html"><a href="basics-of-r.html#subsetting"><i class="fa fa-check"></i><b>1.2.6</b> Subsetting</a></li>
<li class="chapter" data-level="1.2.7" data-path="basics-of-r.html"><a href="basics-of-r.html#lists"><i class="fa fa-check"></i><b>1.2.7</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="basics-of-r.html"><a href="basics-of-r.html#checking-cases-with-conditionals"><i class="fa fa-check"></i><b>1.3</b> Checking cases with conditionals</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="basics-of-r.html"><a href="basics-of-r.html#if--else"><i class="fa fa-check"></i><b>1.3.1</b> <code>if</code>- <code>else</code></a></li>
<li class="chapter" data-level="1.3.2" data-path="basics-of-r.html"><a href="basics-of-r.html#if---else-if---else"><i class="fa fa-check"></i><b>1.3.2</b> <code>if</code> - <code>else if</code> - <code>else</code></a></li>
<li class="chapter" data-level="1.3.3" data-path="basics-of-r.html"><a href="basics-of-r.html#checking-multiple-cases-with-switch"><i class="fa fa-check"></i><b>1.3.3</b> Checking multiple cases with <code>switch</code></a></li>
<li class="chapter" data-level="1.3.4" data-path="basics-of-r.html"><a href="basics-of-r.html#comparison-and-logical-operators"><i class="fa fa-check"></i><b>1.3.4</b> Comparison and logical operators</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="basics-of-r.html"><a href="basics-of-r.html#functions"><i class="fa fa-check"></i><b>1.4</b> Functions</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="basics-of-r.html"><a href="basics-of-r.html#function-definitions"><i class="fa fa-check"></i><b>1.4.1</b> Function definitions</a></li>
<li class="chapter" data-level="1.4.2" data-path="basics-of-r.html"><a href="basics-of-r.html#function-arguments-and-default-values"><i class="fa fa-check"></i><b>1.4.2</b> Function arguments and default values</a></li>
<li class="chapter" data-level="1.4.3" data-path="basics-of-r.html"><a href="basics-of-r.html#arbitrary-number-of-arguments"><i class="fa fa-check"></i><b>1.4.3</b> Arbitrary number of arguments</a></li>
<li class="chapter" data-level="1.4.4" data-path="basics-of-r.html"><a href="basics-of-r.html#function-returns"><i class="fa fa-check"></i><b>1.4.4</b> Function returns</a></li>
<li class="chapter" data-level="1.4.5" data-path="basics-of-r.html"><a href="basics-of-r.html#pipes"><i class="fa fa-check"></i><b>1.4.5</b> Pipes</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="basics-of-r.html"><a href="basics-of-r.html#iterations"><i class="fa fa-check"></i><b>1.5</b> Iterations</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="basics-of-r.html"><a href="basics-of-r.html#for-loops"><i class="fa fa-check"></i><b>1.5.1</b> <code>for</code> loops</a></li>
<li class="chapter" data-level="1.5.2" data-path="basics-of-r.html"><a href="basics-of-r.html#split-apply-combine-with-map-functions"><i class="fa fa-check"></i><b>1.5.2</b> Split, apply, combine with <code>map</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="basics-of-r.html"><a href="basics-of-r.html#sources"><i class="fa fa-check"></i>Sources</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html"><i class="fa fa-check"></i><b>2</b> Data Transformations with <code>dplyr</code> and <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#single-table-verbs"><i class="fa fa-check"></i><b>2.1</b> Single table verbs</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#filter-to-filter-observations"><i class="fa fa-check"></i><b>2.1.1</b> <code>filter</code> to filter observations</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#arrange-to-arrange-a-dataframe-according-to-variables"><i class="fa fa-check"></i><b>2.1.2</b> <code>arrange</code> to arrange a dataframe according to variables</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#select-to-selectdrop-variables"><i class="fa fa-check"></i><b>2.1.3</b> <code>select</code> to select/drop variables</a></li>
<li class="chapter" data-level="2.1.4" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#mutate-to-create-new-variables"><i class="fa fa-check"></i><b>2.1.4</b> <code>mutate</code> to create new variables</a></li>
<li class="chapter" data-level="2.1.5" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#summarise-to-create-summary-tables"><i class="fa fa-check"></i><b>2.1.5</b> <code>summarise</code> to create summary tables</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#using-functions-in-combination-with-logical-subsetting"><i class="fa fa-check"></i><b>2.2</b> Using functions in combination with logical subsetting</a></li>
<li class="chapter" data-level="2.3" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#the-pipe-operator"><i class="fa fa-check"></i><b>2.3</b> The pipe operator</a></li>
<li class="chapter" data-level="2.4" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#multiple-table-verbs"><i class="fa fa-check"></i><b>2.4</b> Multiple table verbs</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#mutating-joins"><i class="fa fa-check"></i><b>2.4.1</b> Mutating joins</a></li>
<li class="chapter" data-level="2.4.2" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#filtering-joins"><i class="fa fa-check"></i><b>2.4.2</b> Filtering joins</a></li>
<li class="chapter" data-level="2.4.3" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#the-by-argument"><i class="fa fa-check"></i><b>2.4.3</b> The <code>by</code> argument</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#reshaping-data-with-tidyr"><i class="fa fa-check"></i><b>2.5</b> Reshaping data with <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#from-dirty-wide-to-tidy-long"><i class="fa fa-check"></i><b>2.5.1</b> From dirty wide to tidy long</a></li>
<li class="chapter" data-level="2.5.2" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#from-dirty-long-to-tidy-wide"><i class="fa fa-check"></i><b>2.5.2</b> From dirty long to tidy wide</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-transformations-with-dplyr-and-tidyr.html"><a href="data-transformations-with-dplyr-and-tidyr.html#sources-1"><i class="fa fa-check"></i>Sources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html"><i class="fa fa-check"></i><b>3</b> Visualizing data with `ggplot2</a>
<ul>
<li class="chapter" data-level="3.1" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#the-dataset"><i class="fa fa-check"></i><b>3.1.1</b> The dataset</a></li>
<li class="chapter" data-level="3.1.2" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#basic-example-an-ordinary-scatterplot"><i class="fa fa-check"></i><b>3.1.2</b> Basic example: an ordinary scatterplot</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#aesthetics"><i class="fa fa-check"></i><b>3.2</b> Aesthetics</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#aesthetic-mappings"><i class="fa fa-check"></i><b>3.2.1</b> Aesthetic mappings</a></li>
<li class="chapter" data-level="3.2.2" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#manually-fixing-aesthetics"><i class="fa fa-check"></i><b>3.2.2</b> Manually fixing aesthetics</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#facets-subplots-for-different-variable-values"><i class="fa fa-check"></i><b>3.3</b> Facets: Subplots for different variable values</a></li>
<li class="chapter" data-level="3.4" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#geoms"><i class="fa fa-check"></i><b>3.4</b> Geoms</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#what-kind-of-plot-do-you-have-in-mind-the-use-of-geoms."><i class="fa fa-check"></i><b>3.4.1</b> What kind of plot do you have in mind? The use of geoms.</a></li>
<li class="chapter" data-level="3.4.2" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#multiple-geoms-in-one-plot"><i class="fa fa-check"></i><b>3.4.2</b> Multiple geoms in one plot</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#statistical-tranformations-with-stats"><i class="fa fa-check"></i><b>3.5</b> Statistical tranformations with <code>stats</code></a></li>
<li class="chapter" data-level="3.6" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#positions"><i class="fa fa-check"></i><b>3.6</b> Positions</a></li>
<li class="chapter" data-level="3.7" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#coordinate-systems"><i class="fa fa-check"></i><b>3.7</b> Coordinate systems</a></li>
<li class="chapter" data-level="3.8" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#labeling"><i class="fa fa-check"></i><b>3.8</b> Labeling</a></li>
<li class="chapter" data-level="3.9" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#scales"><i class="fa fa-check"></i><b>3.9</b> Scales</a></li>
<li class="chapter" data-level="3.10" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#themes"><i class="fa fa-check"></i><b>3.10</b> Themes</a></li>
<li class="chapter" data-level="3.11" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#saving-graphs"><i class="fa fa-check"></i><b>3.11</b> Saving graphs</a></li>
<li class="chapter" data-level="" data-path="visualizing-data-with-ggplot2.html"><a href="visualizing-data-with-ggplot2.html#sources-2"><i class="fa fa-check"></i>Sources</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="factor-variables.html"><a href="factor-variables.html"><i class="fa fa-check"></i><b>4</b> Factor Variables</a>
<ul>
<li class="chapter" data-level="4.1" data-path="factor-variables.html"><a href="factor-variables.html#creating-factors"><i class="fa fa-check"></i><b>4.1</b> Creating Factors</a></li>
<li class="chapter" data-level="4.2" data-path="factor-variables.html"><a href="factor-variables.html#some-other-useful-functions-from-forcats"><i class="fa fa-check"></i><b>4.2</b> Some other useful functions from forcats</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="factor-variables.html"><a href="factor-variables.html#modify-factor-levels"><i class="fa fa-check"></i><b>4.2.1</b> Modify factor levels</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html"><i class="fa fa-check"></i><b>5</b> Reading and Writing Data</a>
<ul>
<li class="chapter" data-level="5.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-csv-files-with-readr"><i class="fa fa-check"></i><b>5.1</b> Reading <code>csv</code> files with <code>readr</code></a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-in--delimited-data"><i class="fa fa-check"></i><b>5.1.1</b> Reading in *-delimited data</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#parsing-data-correctly-with-the-parse-functions"><i class="fa fa-check"></i><b>5.2</b> Parsing data correctly with the <code>parse</code> functions</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#parsing-numbers"><i class="fa fa-check"></i><b>5.2.1</b> Parsing numbers</a></li>
<li class="chapter" data-level="5.2.2" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#parsing-characters"><i class="fa fa-check"></i><b>5.2.2</b> Parsing characters</a></li>
<li class="chapter" data-level="5.2.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#parsing-dates"><i class="fa fa-check"></i><b>5.2.3</b> Parsing dates</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#parsing-and-reading-at-the-same-time"><i class="fa fa-check"></i><b>5.3</b> Parsing and reading at the same time</a></li>
<li class="chapter" data-level="5.4" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#writing-csv-files"><i class="fa fa-check"></i><b>5.4</b> Writing <code>csv</code> files</a></li>
<li class="chapter" data-level="5.5" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#write-and-read-rds-files-with-readr"><i class="fa fa-check"></i><b>5.5</b> Write and read <code>RDS</code> files with <code>readr</code></a></li>
<li class="chapter" data-level="5.6" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#reading-in-excel-sheets-and-stata-data-with-readxl-and-haven"><i class="fa fa-check"></i><b>5.6</b> Reading in Excel sheets and Stata data with <code>readxl</code> and <code>haven</code></a></li>
<li class="chapter" data-level="" data-path="reading-and-writing-data.html"><a href="reading-and-writing-data.html#sources-3"><i class="fa fa-check"></i>Sources</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="working-with-strings.html"><a href="working-with-strings.html"><i class="fa fa-check"></i><b>6</b> Working with Strings</a>
<ul>
<li class="chapter" data-level="6.1" data-path="working-with-strings.html"><a href="working-with-strings.html#string-combine-with-str_c"><i class="fa fa-check"></i><b>6.1</b> String combine with <code>str_c</code></a></li>
<li class="chapter" data-level="6.2" data-path="working-with-strings.html"><a href="working-with-strings.html#substrings-with-str_sub"><i class="fa fa-check"></i><b>6.2</b> Substrings with <code>str_sub</code></a></li>
<li class="chapter" data-level="6.3" data-path="working-with-strings.html"><a href="working-with-strings.html#capitalize-or-not"><i class="fa fa-check"></i><b>6.3</b> Capitalize or not</a></li>
<li class="chapter" data-level="6.4" data-path="working-with-strings.html"><a href="working-with-strings.html#string-sort"><i class="fa fa-check"></i><b>6.4</b> String sort</a></li>
<li class="chapter" data-level="6.5" data-path="working-with-strings.html"><a href="working-with-strings.html#handling-nas"><i class="fa fa-check"></i><b>6.5</b> Handling NAs</a></li>
</ul></li>
<li class="part"><span><b>II Regression Modelling with R</b></span></li>
<li class="chapter" data-level="7" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html"><i class="fa fa-check"></i><b>7</b> Linear Regression Essentials with <code>R</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html#libraries"><i class="fa fa-check"></i><b>7.1</b> Libraries</a></li>
<li class="chapter" data-level="7.2" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html#loading-the-data"><i class="fa fa-check"></i><b>7.2</b> Loading the data</a></li>
<li class="chapter" data-level="7.3" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html#meaningful-names"><i class="fa fa-check"></i><b>7.3</b> Meaningful names</a></li>
<li class="chapter" data-level="7.4" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html#create-variables-for-estimation"><i class="fa fa-check"></i><b>7.4</b> Create variables for estimation</a></li>
<li class="chapter" data-level="7.5" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html#summary-statistics"><i class="fa fa-check"></i><b>7.5</b> Summary statistics</a></li>
<li class="chapter" data-level="7.6" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html#create-three-samples"><i class="fa fa-check"></i><b>7.6</b> Create three samples</a></li>
<li class="chapter" data-level="7.7" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html#run-the-estimation-for-table-1-in-mrw-1992"><i class="fa fa-check"></i><b>7.7</b> Run the estimation for Table 1 in MRW (1992)</a></li>
<li class="chapter" data-level="7.8" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html#show-the-results-in-a-table"><i class="fa fa-check"></i><b>7.8</b> Show the results in a table</a></li>
<li class="chapter" data-level="7.9" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html#robust-standard-errors"><i class="fa fa-check"></i><b>7.9</b> Robust standard errors</a></li>
<li class="chapter" data-level="7.10" data-path="linear-regression-essentials-with-r.html"><a href="linear-regression-essentials-with-r.html#some-graphs"><i class="fa fa-check"></i><b>7.10</b> Some Graphs</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="linear-models-with-fixed-effects.html"><a href="linear-models-with-fixed-effects.html"><i class="fa fa-check"></i><b>8</b> Linear Models with Fixed Effects</a>
<ul>
<li class="chapter" data-level="8.1" data-path="linear-models-with-fixed-effects.html"><a href="linear-models-with-fixed-effects.html#libraries-1"><i class="fa fa-check"></i><b>8.1</b> Libraries</a></li>
<li class="chapter" data-level="8.2" data-path="linear-models-with-fixed-effects.html"><a href="linear-models-with-fixed-effects.html#review-of-plotting-recreating-figure-1"><i class="fa fa-check"></i><b>8.2</b> Review of Plotting: Recreating Figure 1</a></li>
<li class="chapter" data-level="8.3" data-path="linear-models-with-fixed-effects.html"><a href="linear-models-with-fixed-effects.html#review-of-plotting-recreating-figure-2"><i class="fa fa-check"></i><b>8.3</b> Review of Plotting: Recreating Figure 2</a></li>
<li class="chapter" data-level="8.4" data-path="linear-models-with-fixed-effects.html"><a href="linear-models-with-fixed-effects.html#loading-the-data-for-estimation"><i class="fa fa-check"></i><b>8.4</b> Loading the data for estimation</a></li>
<li class="chapter" data-level="8.5" data-path="linear-models-with-fixed-effects.html"><a href="linear-models-with-fixed-effects.html#pooled-ols-with-time-effects"><i class="fa fa-check"></i><b>8.5</b> Pooled OLS with Time Effects</a></li>
<li class="chapter" data-level="8.6" data-path="linear-models-with-fixed-effects.html"><a href="linear-models-with-fixed-effects.html#fixed-effects-with-the-lm-function"><i class="fa fa-check"></i><b>8.6</b> Fixed Effects with the <code>lm</code> function</a></li>
<li class="chapter" data-level="8.7" data-path="linear-models-with-fixed-effects.html"><a href="linear-models-with-fixed-effects.html#pooled-ols-and-fe-with-the-lfe-package"><i class="fa fa-check"></i><b>8.7</b> Pooled OLS and FE with the <code>lfe</code> package</a></li>
<li class="chapter" data-level="8.8" data-path="linear-models-with-fixed-effects.html"><a href="linear-models-with-fixed-effects.html#review-of-iv"><i class="fa fa-check"></i><b>8.8</b> Review of IV</a></li>
<li class="chapter" data-level="8.9" data-path="linear-models-with-fixed-effects.html"><a href="linear-models-with-fixed-effects.html#iv-with-felm"><i class="fa fa-check"></i><b>8.9</b> IV with <code>felm</code></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="instrumental-variables.html"><a href="instrumental-variables.html"><i class="fa fa-check"></i><b>9</b> Instrumental Variables</a>
<ul>
<li class="chapter" data-level="9.1" data-path="instrumental-variables.html"><a href="instrumental-variables.html#libraries-2"><i class="fa fa-check"></i><b>9.1</b> Libraries</a></li>
<li class="chapter" data-level="9.2" data-path="instrumental-variables.html"><a href="instrumental-variables.html#functions-we-might-want-to-have"><i class="fa fa-check"></i><b>9.2</b> Functions We Might Want to Have</a></li>
<li class="chapter" data-level="9.3" data-path="instrumental-variables.html"><a href="instrumental-variables.html#a-brief-review-of-ols-replicating-table-2"><i class="fa fa-check"></i><b>9.3</b> A Brief Review of OLS: Replicating Table 2</a></li>
<li class="chapter" data-level="9.4" data-path="instrumental-variables.html"><a href="instrumental-variables.html#a-brief-review-of-making-figures-replicating-figure-2"><i class="fa fa-check"></i><b>9.4</b> A Brief Review of Making Figures: Replicating Figure 2</a></li>
<li class="chapter" data-level="9.5" data-path="instrumental-variables.html"><a href="instrumental-variables.html#iv-replicating-table-4"><i class="fa fa-check"></i><b>9.5</b> IV: Replicating Table 4</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="instrumental-variables.html"><a href="instrumental-variables.html#loading-the-data-1"><i class="fa fa-check"></i><b>9.5.1</b> Loading the data</a></li>
<li class="chapter" data-level="9.5.2" data-path="instrumental-variables.html"><a href="instrumental-variables.html#doing-it-by-hand"><i class="fa fa-check"></i><b>9.5.2</b> Doing it by hand…</a></li>
<li class="chapter" data-level="9.5.3" data-path="instrumental-variables.html"><a href="instrumental-variables.html#the-ivreg-command"><i class="fa fa-check"></i><b>9.5.3</b> The <code>ivreg</code> Command</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="instrumental-variables.html"><a href="instrumental-variables.html#adding-statistics-to-stargazer"><i class="fa fa-check"></i><b>9.6</b> Adding Statistics to Stargazer</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="difference-in-differences.html"><a href="difference-in-differences.html"><i class="fa fa-check"></i><b>10</b> Difference in Differences</a></li>
<li class="chapter" data-level="11" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html"><i class="fa fa-check"></i><b>11</b> Regression Discontinuity Designs (RDD)</a>
<ul>
<li class="chapter" data-level="11.1" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#libraries-3"><i class="fa fa-check"></i><b>11.1</b> Libraries</a></li>
<li class="chapter" data-level="11.2" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#what-is-the-paper-about"><i class="fa fa-check"></i><b>11.2</b> What is the paper about?</a></li>
<li class="chapter" data-level="11.3" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#lets-load-the-data."><i class="fa fa-check"></i><b>11.3</b> Let’s load the data.</a></li>
<li class="chapter" data-level="11.4" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#select-and-rename-variables"><i class="fa fa-check"></i><b>11.4</b> Select and rename variables</a></li>
<li class="chapter" data-level="11.5" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#create-sample"><i class="fa fa-check"></i><b>11.5</b> Create Sample</a></li>
<li class="chapter" data-level="11.6" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#create-vector-of-control-variables"><i class="fa fa-check"></i><b>11.6</b> Create Vector of Control Variables</a></li>
<li class="chapter" data-level="11.7" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#summary-statistics-1"><i class="fa fa-check"></i><b>11.7</b> Summary Statistics</a></li>
<li class="chapter" data-level="11.8" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#histogram-of-islamic-win-margin"><i class="fa fa-check"></i><b>11.8</b> Histogram of Islamic Win Margin</a></li>
<li class="chapter" data-level="11.9" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#doing-rdd-by-hand"><i class="fa fa-check"></i><b>11.9</b> Doing RDD by Hand</a></li>
<li class="chapter" data-level="11.10" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#rdrobust-package"><i class="fa fa-check"></i><b>11.10</b> <code>rdrobust</code> Package</a>
<ul>
<li class="chapter" data-level="11.10.1" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#rdd-with-and-without-controls"><i class="fa fa-check"></i><b>11.10.1</b> RDD with and without controls</a></li>
<li class="chapter" data-level="11.10.2" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#different-bandwidths"><i class="fa fa-check"></i><b>11.10.2</b> Different bandwidths</a></li>
<li class="chapter" data-level="11.10.3" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#different-control-functions"><i class="fa fa-check"></i><b>11.10.3</b> Different control functions</a></li>
</ul></li>
<li class="chapter" data-level="11.11" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#rdd-plots"><i class="fa fa-check"></i><b>11.11</b> RDD Plots</a>
<ul>
<li class="chapter" data-level="11.11.1" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#main-outcomes-women"><i class="fa fa-check"></i><b>11.11.1</b> Main Outcomes: Women</a></li>
<li class="chapter" data-level="11.11.2" data-path="regression-discontinuity-designs-rdd.html"><a href="regression-discontinuity-designs-rdd.html#main-outcomes-men"><i class="fa fa-check"></i><b>11.11.2</b> Main Outcomes: Men</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Extended Exercises</b></span></li>
<li class="chapter" data-level="12" data-path="data-wrangling-with-dplyr.html"><a href="data-wrangling-with-dplyr.html"><i class="fa fa-check"></i><b>12</b> Data Wrangling with <code>dplyr</code></a></li>
<li class="chapter" data-level="13" data-path="plotting-with-ggplot.html"><a href="plotting-with-ggplot.html"><i class="fa fa-check"></i><b>13</b> Plotting with <code>ggplot</code></a>
<ul>
<li class="chapter" data-level="13.1" data-path="plotting-with-ggplot.html"><a href="plotting-with-ggplot.html#load-data-and-clean-variable-names"><i class="fa fa-check"></i><b>13.1</b> Load Data and Clean variable names</a></li>
<li class="chapter" data-level="13.2" data-path="plotting-with-ggplot.html"><a href="plotting-with-ggplot.html#one-variable-graphs"><i class="fa fa-check"></i><b>13.2</b> One Variable Graphs</a></li>
<li class="chapter" data-level="13.3" data-path="plotting-with-ggplot.html"><a href="plotting-with-ggplot.html#two-variable-graphs"><i class="fa fa-check"></i><b>13.3</b> Two Variable Graphs</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="replicating-adh.html"><a href="replicating-adh.html"><i class="fa fa-check"></i><b>14</b> Replicating ADH</a>
<ul>
<li class="chapter" data-level="14.1" data-path="replicating-adh.html"><a href="replicating-adh.html#motivation"><i class="fa fa-check"></i><b>14.1</b> Motivation</a></li>
<li class="chapter" data-level="14.2" data-path="replicating-adh.html"><a href="replicating-adh.html#us-aggregate-data"><i class="fa fa-check"></i><b>14.2</b> US Aggregate Data</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="replicating-adh.html"><a href="replicating-adh.html#load-necessary-packages"><i class="fa fa-check"></i><b>14.2.1</b> Load Necessary Packages</a></li>
<li class="chapter" data-level="14.2.2" data-path="replicating-adh.html"><a href="replicating-adh.html#get-data-from-federal-reserve"><i class="fa fa-check"></i><b>14.2.2</b> Get Data from Federal Reserve</a></li>
<li class="chapter" data-level="14.2.3" data-path="replicating-adh.html"><a href="replicating-adh.html#data-transformations"><i class="fa fa-check"></i><b>14.2.3</b> Data Transformations</a></li>
<li class="chapter" data-level="14.2.4" data-path="replicating-adh.html"><a href="replicating-adh.html#data-grouping"><i class="fa fa-check"></i><b>14.2.4</b> Data Grouping</a></li>
<li class="chapter" data-level="14.2.5" data-path="replicating-adh.html"><a href="replicating-adh.html#fact-1-increase-of-imports-from-china-and-the-rest-of-the-world"><i class="fa fa-check"></i><b>14.2.5</b> Fact 1: Increase of Imports from China and the Rest of the World</a></li>
<li class="chapter" data-level="14.2.6" data-path="replicating-adh.html"><a href="replicating-adh.html#fact-2-increasing-trade-deficit-of-the-us"><i class="fa fa-check"></i><b>14.2.6</b> Fact 2: Increasing trade-deficit of the US</a></li>
<li class="chapter" data-level="14.2.7" data-path="replicating-adh.html"><a href="replicating-adh.html#fact-3-400-basis-point-fall-in-real-interest-rates-leading-into-china-expansion"><i class="fa fa-check"></i><b>14.2.7</b> Fact 3: 400 basis point fall in real Interest rates leading into China Expansion</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="replicating-adh.html"><a href="replicating-adh.html#descriptive-stats-in-adh-using-weighted-statistics"><i class="fa fa-check"></i><b>14.3</b> Descriptive Stats in ADH using Weighted Statistics</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="replicating-adh.html"><a href="replicating-adh.html#details-about-timing-is-as-follows."><i class="fa fa-check"></i><b>14.3.1</b> Details about timing is as follows.</a></li>
<li class="chapter" data-level="14.3.2" data-path="replicating-adh.html"><a href="replicating-adh.html#understanding-the-essence-of-the-paper-and-what-comes-next."><i class="fa fa-check"></i><b>14.3.2</b> Understanding the Essence of the Paper and What Comes Next.</a></li>
<li class="chapter" data-level="14.3.3" data-path="replicating-adh.html"><a href="replicating-adh.html#load-necessary-packages-1"><i class="fa fa-check"></i><b>14.3.3</b> Load Necessary Packages</a></li>
<li class="chapter" data-level="14.3.4" data-path="replicating-adh.html"><a href="replicating-adh.html#load-data"><i class="fa fa-check"></i><b>14.3.4</b> Load Data</a></li>
<li class="chapter" data-level="14.3.5" data-path="replicating-adh.html"><a href="replicating-adh.html#compute-simple-grouped-mean"><i class="fa fa-check"></i><b>14.3.5</b> Compute Simple Grouped Mean</a></li>
<li class="chapter" data-level="14.3.6" data-path="replicating-adh.html"><a href="replicating-adh.html#computed-weighted-group-means-and-standard-deviations"><i class="fa fa-check"></i><b>14.3.6</b> Computed Weighted Group Means and Standard Deviations</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="replicating-adh.html"><a href="replicating-adh.html#regression-analysis"><i class="fa fa-check"></i><b>14.4</b> Regression Analysis</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="replicating-adh.html"><a href="replicating-adh.html#ols-regression"><i class="fa fa-check"></i><b>14.4.1</b> OLS regression</a></li>
<li class="chapter" data-level="14.4.2" data-path="replicating-adh.html"><a href="replicating-adh.html#clustering"><i class="fa fa-check"></i><b>14.4.2</b> Clustering</a></li>
<li class="chapter" data-level="14.4.3" data-path="replicating-adh.html"><a href="replicating-adh.html#instrument-variables"><i class="fa fa-check"></i><b>14.4.3</b> Instrument Variables</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Solutions to Extended Exercises</b></span></li>
<li class="chapter" data-level="15" data-path="dplyr-solution.html"><a href="dplyr-solution.html"><i class="fa fa-check"></i><b>15</b> <code>dplyr</code> solution</a></li>
<li class="chapter" data-level="16" data-path="ggplot-solution.html"><a href="ggplot-solution.html"><i class="fa fa-check"></i><b>16</b> <code>ggplot</code> solution</a>
<ul>
<li class="chapter" data-level="16.1" data-path="ggplot-solution.html"><a href="ggplot-solution.html#load-data-and-clean-variable-names-1"><i class="fa fa-check"></i><b>16.1</b> Load Data and Clean variable names</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="ggplot-solution.html"><a href="ggplot-solution.html#load-the-data-from-the-file-dataeconomistdata.csv."><i class="fa fa-check"></i><b>16.1.1</b> 1. Load the data from the file <code>data/EconomistData.csv</code>.</a></li>
<li class="chapter" data-level="16.1.2" data-path="ggplot-solution.html"><a href="ggplot-solution.html#convert-all-columns-names-to-snakecase-i.e.-my_variable"><i class="fa fa-check"></i><b>16.1.2</b> 2. Convert all columns names to snakecase (i.e. <code>my_variable</code>)</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="ggplot-solution.html"><a href="ggplot-solution.html#one-variable-graphs-1"><i class="fa fa-check"></i><b>16.2</b> One Variable Graphs</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="ggplot-solution.html"><a href="ggplot-solution.html#create-a-histogram-of-the-human-development-index.-customize-the-number-of-bins-to-make-the-plot-look-nicer-than-the-default."><i class="fa fa-check"></i><b>16.2.1</b> 1. Create a histogram of the human development index. Customize the number of bins to make the plot look nicer than the default.</a></li>
<li class="chapter" data-level="16.2.2" data-path="ggplot-solution.html"><a href="ggplot-solution.html#instead-of-a-histogram-create-a-density-plot-of-the-hdi.-extend-your-plot-by"><i class="fa fa-check"></i><b>16.2.2</b> 2. Instead of a histogram, create a density plot of the HDI. Extend your plot by:</a></li>
<li class="chapter" data-level="16.2.3" data-path="ggplot-solution.html"><a href="ggplot-solution.html#a-in-one-graph-plotting-the-densities-by-region."><i class="fa fa-check"></i><b>16.2.3</b> (a) In one graph plotting the densities by region.</a></li>
<li class="chapter" data-level="16.2.4" data-path="ggplot-solution.html"><a href="ggplot-solution.html#b-creating-separate-plots-per-region-with-the-area-under-the-density-to-be-coloured-blue."><i class="fa fa-check"></i><b>16.2.4</b> (b) Creating separate plots per region, with the area under the density to be coloured blue.</a></li>
<li class="chapter" data-level="16.2.5" data-path="ggplot-solution.html"><a href="ggplot-solution.html#c-repeat-1-and-2-for-the-corruption-perception-index."><i class="fa fa-check"></i><b>16.2.5</b> (c) Repeat (1) and (2) for the corruption perception index.</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="ggplot-solution.html"><a href="ggplot-solution.html#two-variable-graphs-1"><i class="fa fa-check"></i><b>16.3</b> Two Variable Graphs</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="ggplot-solution.html"><a href="ggplot-solution.html#create-the-simple-scatter-plot"><i class="fa fa-check"></i><b>16.3.1</b> 1. Create the simple scatter plot</a></li>
<li class="chapter" data-level="16.3.2" data-path="ggplot-solution.html"><a href="ggplot-solution.html#lets-extend-the-plot-in-different-ways.-modify-the-plot-to-each-point-should-be-a-different-plot"><i class="fa fa-check"></i><b>16.3.2</b> 2. Let’s extend the plot in different ways. Modify the plot to (each point should be a different plot)</a></li>
<li class="chapter" data-level="16.3.3" data-path="ggplot-solution.html"><a href="ggplot-solution.html#a.-make-the-points-blue"><i class="fa fa-check"></i><b>16.3.3</b> a. Make the points blue</a></li>
<li class="chapter" data-level="16.3.4" data-path="ggplot-solution.html"><a href="ggplot-solution.html#b.-color-the-points-by-region"><i class="fa fa-check"></i><b>16.3.4</b> b. Color the points by region</a></li>
<li class="chapter" data-level="16.3.5" data-path="ggplot-solution.html"><a href="ggplot-solution.html#c.-color-the-points-by-region-and-make-the-size-of-the-point-vary-by-hdi."><i class="fa fa-check"></i><b>16.3.5</b> c. Color the points by region and make the size of the point vary by HDI.</a></li>
<li class="chapter" data-level="16.3.6" data-path="ggplot-solution.html"><a href="ggplot-solution.html#lets-extend-the-plot-in-1-by-adding-some-summary-functions-to-it."><i class="fa fa-check"></i><b>16.3.6</b> 3. Let’s extend the plot in (1) by adding some summary functions to it.</a></li>
<li class="chapter" data-level="16.3.7" data-path="ggplot-solution.html"><a href="ggplot-solution.html#a.-add-a-loess-smoother"><i class="fa fa-check"></i><b>16.3.7</b> a. Add a loess smoother</a></li>
<li class="chapter" data-level="16.3.8" data-path="ggplot-solution.html"><a href="ggplot-solution.html#b.-add-a-linear-smoother-without-the-confidence-interval.-color-the-line-red."><i class="fa fa-check"></i><b>16.3.8</b> b. Add a linear smoother, without the confidence interval. Color the line red.</a></li>
<li class="chapter" data-level="16.3.9" data-path="ggplot-solution.html"><a href="ggplot-solution.html#c.-add-the-line-y-x-logx-without-the-confidence-interval.-color-the-line-red."><i class="fa fa-check"></i><b>16.3.9</b> c. Add the line <code>y ~ x + log(x)</code>, without the confidence interval. Color the line red.</a></li>
<li class="chapter" data-level="16.3.10" data-path="ggplot-solution.html"><a href="ggplot-solution.html#now-we-will-add-the-country-names-to-the-plot-from-1."><i class="fa fa-check"></i><b>16.3.10</b> 4. Now we will add the country names to the plot from (1).</a></li>
<li class="chapter" data-level="16.3.11" data-path="ggplot-solution.html"><a href="ggplot-solution.html#a.-use-geom_text-to-add-country-names-to-our-plot."><i class="fa fa-check"></i><b>16.3.11</b> a. Use <code>geom_text()</code> to add country names to our plot.</a></li>
<li class="chapter" data-level="16.3.12" data-path="ggplot-solution.html"><a href="ggplot-solution.html#b.-we-might-not-want-all-the-points-labelled.-create-the-vector"><i class="fa fa-check"></i><b>16.3.12</b> b. We might not want <em>all</em> the points labelled. Create the vector</a></li>
<li class="chapter" data-level="16.3.13" data-path="ggplot-solution.html"><a href="ggplot-solution.html#now-lets-combine-what-we-learned-above-and-from-the-class-notes-to-build-up-a-presentable-notes.-proceed-as-follows"><i class="fa fa-check"></i><b>16.3.13</b> 5. Now let’s combine what we learned above, and from the class notes to build up a presentable notes. Proceed as follows:</a></li>
<li class="chapter" data-level="16.3.14" data-path="ggplot-solution.html"><a href="ggplot-solution.html#a.-create-the-simple-scatter-plot"><i class="fa fa-check"></i><b>16.3.14</b> a. Create the simple scatter plot</a></li>
<li class="chapter" data-level="16.3.15" data-path="ggplot-solution.html"><a href="ggplot-solution.html#b.-make-the-points-hollow-and-colored-by-region.-adjust-the-size-of-the-dots-to-make-them-easier-to-see."><i class="fa fa-check"></i><b>16.3.15</b> b. Make the points hollow, and colored by region. Adjust the size of the dots to make them easier to see.</a></li>
<li class="chapter" data-level="16.3.16" data-path="ggplot-solution.html"><a href="ggplot-solution.html#c.-add-the-line-y-x-logx-without-the-confidence-interval.-color-the-line-red.-1"><i class="fa fa-check"></i><b>16.3.16</b> c. Add the line <code>y ~ x + log(x)</code>, without the confidence interval. Color the line red.</a></li>
<li class="chapter" data-level="16.3.17" data-path="ggplot-solution.html"><a href="ggplot-solution.html#d.-change-the-color-of-the-dots-to-be-less-ugly.-i-used-scale_color_manual-but-you-dont-need-to."><i class="fa fa-check"></i><b>16.3.17</b> d. Change the color of the dots to be less ugly. I used <code>scale_color_manual()</code> but you don’t need to.</a></li>
<li class="chapter" data-level="16.3.18" data-path="ggplot-solution.html"><a href="ggplot-solution.html#e.-add-meaningful-x-and-y-labels.-and-a-title-which-is-centered.-can-you-add-a-note-near-the-bottom-of-the-figure-to-say-that-the-data-comes-from-transparency-international-and-un-human-development-report"><i class="fa fa-check"></i><b>16.3.18</b> e. Add meaningful x and y labels. And a title (which is centered). Can you add a note near the bottom of the figure to say that the data comes from “Transparency International and UN Human Development Report”?</a></li>
<li class="chapter" data-level="16.3.19" data-path="ggplot-solution.html"><a href="ggplot-solution.html#f.-label-the-points-from-points_to_label-in-4b."><i class="fa fa-check"></i><b>16.3.19</b> f. Label the points from <code>points_to_label</code> in 4b.</a></li>
<li class="chapter" data-level="16.3.20" data-path="ggplot-solution.html"><a href="ggplot-solution.html#g.-adjust-the-x-and-y-axes-to-have-a-better-range-and-set-of-axis-ticks.-you-are-free-to-choose-what-you-like."><i class="fa fa-check"></i><b>16.3.20</b> g. Adjust the x and y axes to have a better range, and set of axis ticks. You are free to choose what you like.</a></li>
<li class="chapter" data-level="16.3.21" data-path="ggplot-solution.html"><a href="ggplot-solution.html#h.-move-the-legend-to-the-bottom-of-the-plot.-adjust-the-legend-names-so-that-they-are-easier-to-read-and-more-meaningful.-the-easiest-way-to-do-this-is-to-use-dplyr-to-recode-the-region-variable-as-a-factor-and-give-it-appropriate-labels.-using-the-help-menu-for-factor-should-help-you-here."><i class="fa fa-check"></i><b>16.3.21</b> h. Move the legend to the bottom of the plot. Adjust the legend names so that they are easier to read and more meaningful. The easiest way to do this is to use <code>dplyr</code> to recode the region variable as a factor, and give it appropriate labels. Using the help menu for <code>factor</code> should help you here.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="17" data-path="replicating-adh-1.html"><a href="replicating-adh-1.html"><i class="fa fa-check"></i><b>17</b> Replicating ADH</a>
<ul>
<li class="chapter" data-level="17.1" data-path="replicating-adh-1.html"><a href="replicating-adh-1.html#aggregate-facts"><i class="fa fa-check"></i><b>17.1</b> Aggregate Facts</a></li>
<li class="chapter" data-level="17.2" data-path="replicating-adh-1.html"><a href="replicating-adh-1.html#descriptive-stats"><i class="fa fa-check"></i><b>17.2</b> Descriptive Stats</a>
<ul>
<li class="chapter" data-level="17.2.1" data-path="replicating-adh-1.html"><a href="replicating-adh-1.html#load-data-1"><i class="fa fa-check"></i><b>17.2.1</b> Load Data</a></li>
<li class="chapter" data-level="17.2.2" data-path="replicating-adh-1.html"><a href="replicating-adh-1.html#compute-simple-grouped-mean-1"><i class="fa fa-check"></i><b>17.2.2</b> Compute Simple Grouped Mean</a></li>
<li class="chapter" data-level="17.2.3" data-path="replicating-adh-1.html"><a href="replicating-adh-1.html#computed-weighted-group-means-and-standard-deviations-1"><i class="fa fa-check"></i><b>17.2.3</b> Computed Weighted Group Means and Standard Deviations</a></li>
</ul></li>
<li class="chapter" data-level="17.3" data-path="replicating-adh-1.html"><a href="replicating-adh-1.html#regression"><i class="fa fa-check"></i><b>17.3</b> Regression</a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="replicating-adh-1.html"><a href="replicating-adh-1.html#ols-regression-1"><i class="fa fa-check"></i><b>17.3.1</b> OLS regression</a></li>
<li class="chapter" data-level="17.3.2" data-path="replicating-adh-1.html"><a href="replicating-adh-1.html#clustering-1"><i class="fa fa-check"></i><b>17.3.2</b> Clustering</a></li>
<li class="chapter" data-level="17.3.3" data-path="replicating-adh-1.html"><a href="replicating-adh-1.html#instrument-variables-1"><i class="fa fa-check"></i><b>17.3.3</b> Instrument Variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">An Introduction to R for Economics and Business Research</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="replicating-adh-1" class="section level1" number="17">
<h1><span class="header-section-number">Chapter 17</span> Replicating ADH</h1>
<div id="aggregate-facts" class="section level2" number="17.1">
<h2><span class="header-section-number">17.1</span> Aggregate Facts</h2>
<p>TBD</p>
</div>
<div id="descriptive-stats" class="section level2" number="17.2">
<h2><span class="header-section-number">17.2</span> Descriptive Stats</h2>
<p>Install the ones you do not have yet.</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb592-1"><a href="replicating-adh-1.html#cb592-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;readr&quot;</span>)</span>
<span id="cb592-2"><a href="replicating-adh-1.html#cb592-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tibble&quot;</span>)</span>
<span id="cb592-3"><a href="replicating-adh-1.html#cb592-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb592-4"><a href="replicating-adh-1.html#cb592-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;Hmisc&quot;</span>)</span></code></pre></div>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## Loading required package: Formula</code></pre>
<pre><code>## 
## Attaching package: &#39;Hmisc&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     src, summarize</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     format.pval, units</code></pre>
<div id="load-data-1" class="section level3" number="17.2.1">
<h3><span class="header-section-number">17.2.1</span> Load Data</h3>
<p>Like always, we are going to load the data and save it as a tibble</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb598-1"><a href="replicating-adh-1.html#cb598-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/adh_data.csv&quot;</span>) <span class="sc">%&gt;%</span> as_tibble</span></code></pre></div>
<pre><code>## Rows: 1444 Columns: 208</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr   (1): city
## dbl (207): czone, statefip, yr, t2, timepwt48, reg_midatl, reg_encen, reg_wn...</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div id="compute-simple-grouped-mean-1" class="section level3" number="17.2.2">
<h3><span class="header-section-number">17.2.2</span> Compute Simple Grouped Mean</h3>
<ol style="list-style-type: decimal">
<li>Find which years (<code>yr</code>) are reflected in the data.</li>
</ol>
<div class="sourceCode" id="cb602"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb602-1"><a href="replicating-adh-1.html#cb602-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(df<span class="sc">$</span>yr)</span></code></pre></div>
<pre><code>## [1] 1990 2000</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Compute the average number of chinese imports per worker (<code>l_tradeusch_pw</code> &amp; <code>d_tradeusch_pw</code>) for each “year”.</li>
</ol>
<div class="sourceCode" id="cb604"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb604-1"><a href="replicating-adh-1.html#cb604-1" aria-hidden="true" tabindex="-1"></a>df_yr <span class="ot">=</span> <span class="fu">group_by</span>(df, yr)</span>
<span id="cb604-2"><a href="replicating-adh-1.html#cb604-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb604-3"><a href="replicating-adh-1.html#cb604-3" aria-hidden="true" tabindex="-1"></a>df_yr <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">l_tradeusch_pw_avg =</span> <span class="fu">mean</span>(l_tradeusch_pw),</span>
<span id="cb604-4"><a href="replicating-adh-1.html#cb604-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">d_tradeusch_pw_avg           =</span> <span class="fu">mean</span>(d_tradeusch_pw)</span>
<span id="cb604-5"><a href="replicating-adh-1.html#cb604-5" aria-hidden="true" tabindex="-1"></a>          )</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##      yr l_tradeusch_pw_avg d_tradeusch_pw_avg
##   &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;
## 1  1990              0.364               1.18
## 2  2000              1.12                2.64</code></pre>
</div>
<div id="computed-weighted-group-means-and-standard-deviations-1" class="section level3" number="17.2.3">
<h3><span class="header-section-number">17.2.3</span> Computed Weighted Group Means and Standard Deviations</h3>
<p>For the rest of the exercise, weight the mean by population count per region instead (<code>l_popcount</code>) and compare it with the numbers in the table.</p>
<ol start="3" style="list-style-type: decimal">
<li>Repeat step 2 with weights.</li>
</ol>
<div class="sourceCode" id="cb606"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb606-1"><a href="replicating-adh-1.html#cb606-1" aria-hidden="true" tabindex="-1"></a>df_yr <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">l_tradeusch_pw =</span> <span class="fu">weighted.mean</span>(l_tradeusch_pw),</span>
<span id="cb606-2"><a href="replicating-adh-1.html#cb606-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">d_tradeusch_pw =</span> <span class="fu">weighted.mean</span>(d_tradeusch_pw))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##      yr l_tradeusch_pw d_tradeusch_pw
##   &lt;dbl&gt;          &lt;dbl&gt;          &lt;dbl&gt;
## 1  1990          0.364           1.18
## 2  2000          1.12            2.64</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>Now also compute the weighted standard deviations for both variables. Hint: Use the <code>Hmisc</code> package and find the relevant function.</li>
</ol>
<div class="sourceCode" id="cb608"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb608-1"><a href="replicating-adh-1.html#cb608-1" aria-hidden="true" tabindex="-1"></a>df_yr <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">l_tradeusch_pw_avg =</span> <span class="fu">weighted.mean</span>(l_tradeusch_pw),</span>
<span id="cb608-2"><a href="replicating-adh-1.html#cb608-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">d_tradeusch_pw_avg =</span> <span class="fu">weighted.mean</span>(d_tradeusch_pw),</span>
<span id="cb608-3"><a href="replicating-adh-1.html#cb608-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">l_tradeusch_pw_sd  =</span> <span class="fu">sqrt</span>(<span class="fu">wtd.var</span>(l_tradeusch_pw, l_popcount)),</span>
<span id="cb608-4"><a href="replicating-adh-1.html#cb608-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">d_tradeusch_pw_sd  =</span> <span class="fu">sqrt</span>(<span class="fu">wtd.var</span>(d_tradeusch_pw, l_popcount))</span>
<span id="cb608-5"><a href="replicating-adh-1.html#cb608-5" aria-hidden="true" tabindex="-1"></a>                    )</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##      yr l_tradeusch_pw_avg d_tradeusch_pw_avg l_tradeusch_pw_sd d_tradeusch_pw_…
##   &lt;dbl&gt;              &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;
## 1  1990              0.364               1.18             0.325            0.992
## 2  2000              1.12                2.64             0.897            2.01</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>Now compute the mean and standard deviation of the average household wage and salary (<code>l_avg_hhincwage_pc_pw</code>, <code>d_avg_hhincwage_pc_pw</code>)</li>
</ol>
<div class="sourceCode" id="cb610"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb610-1"><a href="replicating-adh-1.html#cb610-1" aria-hidden="true" tabindex="-1"></a>df_yr <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">l_avg_hhincwage_pc_pw_avg =</span> <span class="fu">weighted.mean</span>(l_avg_hhincwage_pc_pw),</span>
<span id="cb610-2"><a href="replicating-adh-1.html#cb610-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">d_avg_hhincwage_pc_pw_avg =</span> <span class="fu">weighted.mean</span>(d_avg_hhincwage_pc_pw),</span>
<span id="cb610-3"><a href="replicating-adh-1.html#cb610-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">l_avg_hhincwage_pc_pw_sd  =</span> <span class="fu">sqrt</span>(<span class="fu">wtd.var</span>(l_avg_hhincwage_pc_pw, l_popcount)),</span>
<span id="cb610-4"><a href="replicating-adh-1.html#cb610-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">d_avg_hhincwage_pc_pw_sd  =</span> <span class="fu">sqrt</span>(<span class="fu">wtd.var</span>(d_avg_hhincwage_pc_pw, l_popcount))</span>
<span id="cb610-5"><a href="replicating-adh-1.html#cb610-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##      yr l_avg_hhincwage_p… d_avg_hhincwage_… l_avg_hhincwage_… d_avg_hhincwage_…
##   &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;
## 1  1990             18093.             3618.             4697.             1568.
## 2  2000             21711.             1077.             5445.             2621.</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>And once more for share not in labor force (<code>l_sh_nilf</code>, <code>d_sh_nilf</code>)</li>
</ol>
<div class="sourceCode" id="cb612"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb612-1"><a href="replicating-adh-1.html#cb612-1" aria-hidden="true" tabindex="-1"></a>df_yr <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">l_sh_nilf_avg =</span> <span class="fu">weighted.mean</span>(l_sh_nilf, , l_popcount),</span>
<span id="cb612-2"><a href="replicating-adh-1.html#cb612-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">d_sh_nilf_avg =</span> <span class="fu">weighted.mean</span>(d_sh_nilf, , l_popcount),</span>
<span id="cb612-3"><a href="replicating-adh-1.html#cb612-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">l_sh_nilf_sd  =</span> <span class="fu">sqrt</span>(<span class="fu">wtd.var</span>(l_sh_nilf, l_popcount)),</span>
<span id="cb612-4"><a href="replicating-adh-1.html#cb612-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">d_sh_nilf_sd  =</span> <span class="fu">sqrt</span>(<span class="fu">wtd.var</span>(d_sh_nilf, l_popcount))</span>
<span id="cb612-5"><a href="replicating-adh-1.html#cb612-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##      yr l_sh_nilf_avg d_sh_nilf_avg l_sh_nilf_sd d_sh_nilf_sd
##   &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;
## 1  1990          26.7        -0.344         4.33         2.55
## 2  2000          26.4        -1.51          4.39         2.56</code></pre>
</div>
</div>
<div id="regression" class="section level2" number="17.3">
<h2><span class="header-section-number">17.3</span> Regression</h2>
<p>Let’s first load the necessary packages to read data and do fancy regressions:</p>
<div class="sourceCode" id="cb614"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb614-1"><a href="replicating-adh-1.html#cb614-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;readr&quot;</span>)</span>
<span id="cb614-2"><a href="replicating-adh-1.html#cb614-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;tibble&quot;</span>)</span>
<span id="cb614-3"><a href="replicating-adh-1.html#cb614-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;dplyr&quot;</span>)</span>
<span id="cb614-4"><a href="replicating-adh-1.html#cb614-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sandwich&quot;</span>)</span>
<span id="cb614-5"><a href="replicating-adh-1.html#cb614-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;lmtest&quot;</span>)</span>
<span id="cb614-6"><a href="replicating-adh-1.html#cb614-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;lfe&quot;</span>)</span></code></pre></div>
<p>And let’s load the data like we always do:</p>
<div class="sourceCode" id="cb615"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb615-1"><a href="replicating-adh-1.html#cb615-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/adh_data.csv&quot;</span>)</span></code></pre></div>
<pre><code>## Rows: 1444 Columns: 208</code></pre>
<pre><code>## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr   (1): city
## dbl (207): czone, statefip, yr, t2, timepwt48, reg_midatl, reg_encen, reg_wn...</code></pre>
<pre><code>## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div id="ols-regression-1" class="section level3" number="17.3.1">
<h3><span class="header-section-number">17.3.1</span> OLS regression</h3>
<p>The core of the paper is looking at what happened to laborer’s when theres an increase in us imports from china.
Let’s try and replicate part of Table 9 - namely the estimate from panel A column 2.</p>
<p>Their y variable is <code>relchg_avg_hhincwage_pc_pw</code>.
The important x variable is decadal trade between the us and china <code>d_tradeusch_pw</code>.</p>
<ol style="list-style-type: decimal">
<li>Run that simple regression</li>
</ol>
<div class="sourceCode" id="cb619"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb619-1"><a href="replicating-adh-1.html#cb619-1" aria-hidden="true" tabindex="-1"></a>lm_1 <span class="ot">=</span> <span class="fu">lm</span>(relchg_avg_hhincwage_pc_pw <span class="sc">~</span> d_tradeusch_pw, <span class="at">data =</span> df)</span>
<span id="cb619-2"><a href="replicating-adh-1.html#cb619-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm_1)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = relchg_avg_hhincwage_pc_pw ~ d_tradeusch_pw, data = df)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -28.789  -8.411  -0.663   7.715  49.684 
## 
## Coefficients:
##                Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)     16.0720     0.3889   41.33   &lt;2e-16 ***
## d_tradeusch_pw  -1.6466     0.1212  -13.59   &lt;2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 11.89 on 1442 degrees of freedom
## Multiple R-squared:  0.1135, Adjusted R-squared:  0.1129 
## F-statistic: 184.6 on 1 and 1442 DF,  p-value: &lt; 2.2e-16</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Now add heteroskedasticity robust standard (HC1). Hint: Use the <code>sandwich</code> and <code>lmtest</code> packages</li>
</ol>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="replicating-adh-1.html#cb621-1" aria-hidden="true" tabindex="-1"></a><span class="fu">coeftest</span>(lm_1, <span class="at">vcov =</span> <span class="fu">vcovHC</span>(lm_1, <span class="at">type=</span><span class="st">&quot;HC1&quot;</span>))</span></code></pre></div>
<pre><code>## 
## t test of coefficients:
## 
##                Estimate Std. Error t value  Pr(&gt;|t|)    
## (Intercept)    16.07198    0.57211 28.0923 &lt; 2.2e-16 ***
## d_tradeusch_pw -1.64663    0.28496 -5.7785 9.219e-09 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
<p>Now we will start to add extra x variables.</p>
<ol start="3" style="list-style-type: decimal">
<li>Start by adding <code>t2</code> - a dummy variable for whether observation is in the second decade.
Fit again with HC1 robust standard errors.</li>
</ol>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="replicating-adh-1.html#cb623-1" aria-hidden="true" tabindex="-1"></a>lm_2 <span class="ot">=</span> <span class="fu">lm</span>(relchg_avg_hhincwage_pc_pw <span class="sc">~</span> d_tradeusch_pw <span class="sc">+</span> t2, <span class="at">data =</span> df)</span>
<span id="cb623-2"><a href="replicating-adh-1.html#cb623-2" aria-hidden="true" tabindex="-1"></a><span class="fu">coeftest</span>(lm_2, <span class="at">vcov =</span> <span class="fu">vcovHC</span>(lm_2, <span class="at">type=</span><span class="st">&quot;HC1&quot;</span>))</span></code></pre></div>
<pre><code>## 
## t test of coefficients:
## 
##                 Estimate Std. Error  t value  Pr(&gt;|t|)    
## (Intercept)     21.59096    0.39889  54.1271 &lt; 2.2e-16 ***
## d_tradeusch_pw  -0.88316    0.16804  -5.2555 1.698e-07 ***
## t2             -13.94769    0.57869 -24.1023 &lt; 2.2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</code></pre>
</div>
<div id="clustering-1" class="section level3" number="17.3.2">
<h3><span class="header-section-number">17.3.2</span> Clustering</h3>
<p>Let us now use clustertered standard errors instead. ADH cluster by <code>statefip</code>.
Hint: use the <code>felm</code> command from the <code>lfe</code> package</p>
<ol style="list-style-type: decimal">
<li>Run the basic regression with clustering</li>
</ol>
<div class="sourceCode" id="cb625"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb625-1"><a href="replicating-adh-1.html#cb625-1" aria-hidden="true" tabindex="-1"></a>felm_1 <span class="ot">=</span> <span class="fu">felm</span>(relchg_avg_hhincwage_pc_pw <span class="sc">~</span> d_tradeusch_pw <span class="sc">+</span> t2 <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> statefip, <span class="at">data =</span> df)</span>
<span id="cb625-2"><a href="replicating-adh-1.html#cb625-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(felm_1)</span></code></pre></div>
<pre><code>## 
## Call:
##    felm(formula = relchg_avg_hhincwage_pc_pw ~ d_tradeusch_pw +      t2 | 0 | 0 | statefip, data = df) 
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -32.707  -6.259  -0.799   5.024  43.128 
## 
## Coefficients:
##                Estimate Cluster s.e. t value Pr(&gt;|t|)    
## (Intercept)     21.5910       0.9841  21.941  &lt; 2e-16 ***
## d_tradeusch_pw  -0.8832       0.2544  -3.472 0.000532 ***
## t2             -13.9477       1.8146  -7.686 2.79e-14 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 9.831 on 1441 degrees of freedom
## Multiple R-squared(full model): 0.3944   Adjusted R-squared: 0.3936 
## Multiple R-squared(proj model): 0.3944   Adjusted R-squared: 0.3936 
## F-statistic(full model, *iid*):469.3 on 2 and 1441 DF, p-value: &lt; 2.2e-16 
## F-statistic(proj model):  68.5 on 2 and 47 DF, p-value: 1.179e-14</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Add the following controls to your last regression:
<ul>
<li><code>l_shind_manuf_cbp</code></li>
<li><code>l_sh_popedu_c</code></li>
<li><code>l_sh_popfborn</code></li>
<li><code>l_sh_empl_f</code></li>
<li><code>l_sh_routine33</code></li>
<li><code>l_task_outsource</code></li>
</ul></li>
</ol>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="replicating-adh-1.html#cb627-1" aria-hidden="true" tabindex="-1"></a>felm_2 <span class="ot">=</span> <span class="fu">felm</span>(relchg_avg_hhincwage_pc_pw <span class="sc">~</span> d_tradeusch_pw <span class="sc">+</span> t2 <span class="sc">+</span></span>
<span id="cb627-2"><a href="replicating-adh-1.html#cb627-2" aria-hidden="true" tabindex="-1"></a>                l_shind_manuf_cbp <span class="sc">+</span> l_sh_popedu_c <span class="sc">+</span> l_sh_popfborn <span class="sc">+</span></span>
<span id="cb627-3"><a href="replicating-adh-1.html#cb627-3" aria-hidden="true" tabindex="-1"></a>                l_sh_empl_f <span class="sc">+</span> l_sh_routine33 <span class="sc">+</span> l_task_outsource</span>
<span id="cb627-4"><a href="replicating-adh-1.html#cb627-4" aria-hidden="true" tabindex="-1"></a>                <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> statefip, <span class="at">data =</span> df)</span>
<span id="cb627-5"><a href="replicating-adh-1.html#cb627-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(felm_2)</span></code></pre></div>
<pre><code>## 
## Call:
##    felm(formula = relchg_avg_hhincwage_pc_pw ~ d_tradeusch_pw +      t2 + l_shind_manuf_cbp + l_sh_popedu_c + l_sh_popfborn +      l_sh_empl_f + l_sh_routine33 + l_task_outsource | 0 | 0 |      statefip, data = df) 
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -37.329  -5.869  -0.534   5.229  40.819 
## 
## Coefficients:
##                    Estimate Cluster s.e. t value Pr(&gt;|t|)    
## (Intercept)        43.38967      8.70748   4.983 7.02e-07 ***
## d_tradeusch_pw     -0.37033      0.13283  -2.788  0.00537 ** 
## t2                -13.79402      1.76456  -7.817 1.04e-14 ***
## l_shind_manuf_cbp  -0.18211      0.03835  -4.749 2.25e-06 ***
## l_sh_popedu_c      -0.13418      0.05494  -2.442  0.01471 *  
## l_sh_popfborn      -0.13180      0.08678  -1.519  0.12903    
## l_sh_empl_f         0.31270      0.07987   3.915 9.46e-05 ***
## l_sh_routine33     -1.04448      0.23945  -4.362 1.38e-05 ***
## l_task_outsource    4.21857      1.72489   2.446  0.01458 *  
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 9.218 on 1435 degrees of freedom
## Multiple R-squared(full model): 0.4699   Adjusted R-squared: 0.4669 
## Multiple R-squared(proj model): 0.4699   Adjusted R-squared: 0.4669 
## F-statistic(full model, *iid*):  159 on 8 and 1435 DF, p-value: &lt; 2.2e-16 
## F-statistic(proj model): 28.75 on 8 and 47 DF, p-value: 1.276e-15</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>Add region fixed effects to your regression.
<ul>
<li>First find all variables in the dataset that start with <code>reg_</code></li>
<li>Add these to your last regression</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="replicating-adh-1.html#cb629-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">select</span>(df, <span class="fu">starts_with</span>(<span class="st">&quot;reg_&quot;</span>)))</span></code></pre></div>
<pre><code>## [1] &quot;reg_midatl&quot; &quot;reg_encen&quot;  &quot;reg_wncen&quot;  &quot;reg_satl&quot;   &quot;reg_escen&quot; 
## [6] &quot;reg_wscen&quot;  &quot;reg_mount&quot;  &quot;reg_pacif&quot;</code></pre>
<div class="sourceCode" id="cb631"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb631-1"><a href="replicating-adh-1.html#cb631-1" aria-hidden="true" tabindex="-1"></a>felm_3 <span class="ot">=</span> <span class="fu">felm</span>(relchg_avg_hhincwage_pc_pw <span class="sc">~</span> d_tradeusch_pw <span class="sc">+</span> t2 <span class="sc">+</span></span>
<span id="cb631-2"><a href="replicating-adh-1.html#cb631-2" aria-hidden="true" tabindex="-1"></a>                l_shind_manuf_cbp <span class="sc">+</span> l_sh_popedu_c <span class="sc">+</span> l_sh_popfborn <span class="sc">+</span></span>
<span id="cb631-3"><a href="replicating-adh-1.html#cb631-3" aria-hidden="true" tabindex="-1"></a>                l_sh_empl_f <span class="sc">+</span> l_sh_routine33 <span class="sc">+</span> l_task_outsource <span class="sc">+</span></span>
<span id="cb631-4"><a href="replicating-adh-1.html#cb631-4" aria-hidden="true" tabindex="-1"></a>                reg_midatl <span class="sc">+</span> reg_encen <span class="sc">+</span> reg_wncen <span class="sc">+</span> reg_satl <span class="sc">+</span></span>
<span id="cb631-5"><a href="replicating-adh-1.html#cb631-5" aria-hidden="true" tabindex="-1"></a>                reg_escen <span class="sc">+</span> reg_wscen <span class="sc">+</span> reg_mount <span class="sc">+</span> reg_pacif</span>
<span id="cb631-6"><a href="replicating-adh-1.html#cb631-6" aria-hidden="true" tabindex="-1"></a>              <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> statefip, <span class="at">data =</span> df)</span>
<span id="cb631-7"><a href="replicating-adh-1.html#cb631-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(felm_3)</span></code></pre></div>
<pre><code>## 
## Call:
##    felm(formula = relchg_avg_hhincwage_pc_pw ~ d_tradeusch_pw +      t2 + l_shind_manuf_cbp + l_sh_popedu_c + l_sh_popfborn +      l_sh_empl_f + l_sh_routine33 + l_task_outsource + reg_midatl +      reg_encen + reg_wncen + reg_satl + reg_escen + reg_wscen +      reg_mount + reg_pacif | 0 | 0 | statefip, data = df) 
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -36.256  -5.408  -0.643   4.993  40.596 
## 
## Coefficients:
##                    Estimate Cluster s.e. t value Pr(&gt;|t|)    
## (Intercept)        37.81934     10.64339   3.553 0.000393 ***
## d_tradeusch_pw     -0.41327      0.12965  -3.188 0.001465 ** 
## t2                -13.67579      1.73663  -7.875 6.70e-15 ***
## l_shind_manuf_cbp  -0.15404      0.03266  -4.716 2.64e-06 ***
## l_sh_popedu_c      -0.09418      0.05679  -1.658 0.097449 .  
## l_sh_popfborn      -0.09372      0.07883  -1.189 0.234674    
## l_sh_empl_f         0.18554      0.09601   1.933 0.053492 .  
## l_sh_routine33     -0.79294      0.26449  -2.998 0.002764 ** 
## l_task_outsource    4.26729      1.87809   2.272 0.023226 *  
## reg_midatl          2.06339      1.97681   1.044 0.296757    
## reg_encen           2.10566      2.13354   0.987 0.323844    
## reg_wncen           6.91844      2.14751   3.222 0.001303 ** 
## reg_satl            0.87864      1.89366   0.464 0.642723    
## reg_escen           4.30400      2.16206   1.991 0.046705 *  
## reg_wscen           5.05509      2.07366   2.438 0.014900 *  
## reg_mount           4.48765      2.04204   2.198 0.028136 *  
## reg_pacif          -0.17986      1.91287  -0.094 0.925100    
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 8.997 on 1427 degrees of freedom
## Multiple R-squared(full model): 0.4977   Adjusted R-squared: 0.4921 
## Multiple R-squared(proj model): 0.4977   Adjusted R-squared: 0.4921 
## F-statistic(full model, *iid*):88.38 on 16 and 1427 DF, p-value: &lt; 2.2e-16 
## F-statistic(proj model): 21.68 on 16 and 47 DF, p-value: &lt; 2.2e-16</code></pre>
</div>
<div id="instrument-variables-1" class="section level3" number="17.3.3">
<h3><span class="header-section-number">17.3.3</span> Instrument Variables</h3>
<ol style="list-style-type: decimal">
<li>Instrument <code>d_tradeusch_pw</code> with <code>d_tradeotch_pw_lag</code> in your last regression</li>
</ol>
<div class="sourceCode" id="cb633"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb633-1"><a href="replicating-adh-1.html#cb633-1" aria-hidden="true" tabindex="-1"></a>felm_4 <span class="ot">=</span> <span class="fu">felm</span>(relchg_avg_hhincwage_pc_pw <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> t2 <span class="sc">+</span></span>
<span id="cb633-2"><a href="replicating-adh-1.html#cb633-2" aria-hidden="true" tabindex="-1"></a>                l_shind_manuf_cbp <span class="sc">+</span> l_sh_popedu_c <span class="sc">+</span> l_sh_popfborn <span class="sc">+</span></span>
<span id="cb633-3"><a href="replicating-adh-1.html#cb633-3" aria-hidden="true" tabindex="-1"></a>                l_sh_empl_f <span class="sc">+</span> l_sh_routine33 <span class="sc">+</span> l_task_outsource <span class="sc">+</span></span>
<span id="cb633-4"><a href="replicating-adh-1.html#cb633-4" aria-hidden="true" tabindex="-1"></a>                reg_midatl <span class="sc">+</span> reg_encen <span class="sc">+</span> reg_wncen <span class="sc">+</span> reg_satl <span class="sc">+</span></span>
<span id="cb633-5"><a href="replicating-adh-1.html#cb633-5" aria-hidden="true" tabindex="-1"></a>                reg_escen <span class="sc">+</span> reg_wscen <span class="sc">+</span> reg_mount <span class="sc">+</span> reg_pacif</span>
<span id="cb633-6"><a href="replicating-adh-1.html#cb633-6" aria-hidden="true" tabindex="-1"></a>              <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> (d_tradeusch_pw <span class="sc">~</span> d_tradeotch_pw_lag) <span class="sc">|</span> statefip,</span>
<span id="cb633-7"><a href="replicating-adh-1.html#cb633-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> df)</span>
<span id="cb633-8"><a href="replicating-adh-1.html#cb633-8" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(felm_4)</span></code></pre></div>
<pre><code>## 
## Call:
##    felm(formula = relchg_avg_hhincwage_pc_pw ~ 1 + t2 + l_shind_manuf_cbp +      l_sh_popedu_c + l_sh_popfborn + l_sh_empl_f + l_sh_routine33 +      l_task_outsource + reg_midatl + reg_encen + reg_wncen + reg_satl +      reg_escen + reg_wscen + reg_mount + reg_pacif | 0 | (d_tradeusch_pw ~      d_tradeotch_pw_lag) | statefip, data = df) 
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -36.066  -5.524  -0.555   4.996  42.042 
## 
## Coefficients:
##                        Estimate Cluster s.e. t value Pr(&gt;|t|)    
## (Intercept)            35.87405     10.64255   3.371 0.000769 ***
## t2                    -12.28244      1.97304  -6.225 6.31e-10 ***
## l_shind_manuf_cbp      -0.08113      0.04139  -1.960 0.050177 .  
## l_sh_popedu_c          -0.08755      0.05778  -1.515 0.129955    
## l_sh_popfborn          -0.08900      0.08150  -1.092 0.275021    
## l_sh_empl_f             0.18856      0.09896   1.905 0.056935 .  
## l_sh_routine33         -0.75086      0.26165  -2.870 0.004168 ** 
## l_task_outsource        4.20832      1.86424   2.257 0.024135 *  
## reg_midatl              1.97306      1.93354   1.020 0.307693    
## reg_encen               1.62608      2.22012   0.732 0.464027    
## reg_wncen               6.46027      2.19861   2.938 0.003353 ** 
## reg_satl                0.41119      1.94593   0.211 0.832677    
## reg_escen               5.02788      2.28463   2.201 0.027914 *  
## reg_wscen               4.62044      2.12783   2.171 0.030063 *  
## reg_mount               3.89093      2.09533   1.857 0.063523 .  
## reg_pacif              -0.94648      2.00055  -0.473 0.636206    
## `d_tradeusch_pw(fit)`  -1.27575      0.43200  -2.953 0.003197 ** 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 9.186 on 1427 degrees of freedom
## Multiple R-squared(full model): 0.4765   Adjusted R-squared: 0.4706 
## Multiple R-squared(proj model): 0.4765   Adjusted R-squared: 0.4706 
## F-statistic(full model, *iid*):86.45 on 16 and 1427 DF, p-value: &lt; 2.2e-16 
## F-statistic(proj model): 18.74 on 16 and 47 DF, p-value: 3.486e-15 
## F-statistic(endog. vars):8.721 on 1 and 47 DF, p-value: 0.004898</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Weight your regression by <code>timepwt48</code></li>
</ol>
<p>The <code>felm</code> function is a bit picky on the order of the weights. Let us first try to define weights at the end after the <code>data</code> argument like so:</p>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="replicating-adh-1.html#cb635-1" aria-hidden="true" tabindex="-1"></a>felm_5 <span class="ot">=</span> <span class="fu">felm</span>(relchg_avg_hhincwage_pc_pw <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> t2 <span class="sc">+</span></span>
<span id="cb635-2"><a href="replicating-adh-1.html#cb635-2" aria-hidden="true" tabindex="-1"></a>                l_shind_manuf_cbp <span class="sc">+</span> l_sh_popedu_c <span class="sc">+</span> l_sh_popfborn <span class="sc">+</span></span>
<span id="cb635-3"><a href="replicating-adh-1.html#cb635-3" aria-hidden="true" tabindex="-1"></a>                l_sh_empl_f <span class="sc">+</span> l_sh_routine33 <span class="sc">+</span> l_task_outsource <span class="sc">+</span></span>
<span id="cb635-4"><a href="replicating-adh-1.html#cb635-4" aria-hidden="true" tabindex="-1"></a>                reg_midatl <span class="sc">+</span> reg_encen <span class="sc">+</span> reg_wncen <span class="sc">+</span> reg_satl <span class="sc">+</span></span>
<span id="cb635-5"><a href="replicating-adh-1.html#cb635-5" aria-hidden="true" tabindex="-1"></a>                reg_escen <span class="sc">+</span> reg_wscen <span class="sc">+</span> reg_mount <span class="sc">+</span> reg_pacif</span>
<span id="cb635-6"><a href="replicating-adh-1.html#cb635-6" aria-hidden="true" tabindex="-1"></a>              <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> (d_tradeusch_pw <span class="sc">~</span> d_tradeotch_pw_lag) <span class="sc">|</span> statefip, </span>
<span id="cb635-7"><a href="replicating-adh-1.html#cb635-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> df,</span>
<span id="cb635-8"><a href="replicating-adh-1.html#cb635-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">weights =</span> timepwt48)</span></code></pre></div>
<pre><code>## Error in eval(mf[[wpos]], pf): object &#39;timepwt48&#39; not found</code></pre>
<div class="sourceCode" id="cb637"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb637-1"><a href="replicating-adh-1.html#cb637-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(felm_5)</span></code></pre></div>
<pre><code>## Error in h(simpleError(msg, call)): error in evaluating the argument &#39;object&#39; in selecting a method for function &#39;summary&#39;: object &#39;felm_5&#39; not found</code></pre>
<p>Felm didn’t find <code>timepwt48</code> because it only assumes that columns are in <code>df</code> before you define <code>data = df</code>. We can solve this in two ways.</p>
<ol style="list-style-type: decimal">
<li>A good rule is to have <code>data = df</code> as the last argument.</li>
</ol>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="replicating-adh-1.html#cb639-1" aria-hidden="true" tabindex="-1"></a>felm_5 <span class="ot">=</span> <span class="fu">felm</span>(relchg_avg_hhincwage_pc_pw <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> t2 <span class="sc">+</span></span>
<span id="cb639-2"><a href="replicating-adh-1.html#cb639-2" aria-hidden="true" tabindex="-1"></a>                l_shind_manuf_cbp <span class="sc">+</span> l_sh_popedu_c <span class="sc">+</span> l_sh_popfborn <span class="sc">+</span></span>
<span id="cb639-3"><a href="replicating-adh-1.html#cb639-3" aria-hidden="true" tabindex="-1"></a>                l_sh_empl_f <span class="sc">+</span> l_sh_routine33 <span class="sc">+</span> l_task_outsource <span class="sc">+</span></span>
<span id="cb639-4"><a href="replicating-adh-1.html#cb639-4" aria-hidden="true" tabindex="-1"></a>                reg_midatl <span class="sc">+</span> reg_encen <span class="sc">+</span> reg_wncen <span class="sc">+</span> reg_satl <span class="sc">+</span></span>
<span id="cb639-5"><a href="replicating-adh-1.html#cb639-5" aria-hidden="true" tabindex="-1"></a>                reg_escen <span class="sc">+</span> reg_wscen <span class="sc">+</span> reg_mount <span class="sc">+</span> reg_pacif</span>
<span id="cb639-6"><a href="replicating-adh-1.html#cb639-6" aria-hidden="true" tabindex="-1"></a>              <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> (d_tradeusch_pw <span class="sc">~</span> d_tradeotch_pw_lag) <span class="sc">|</span> statefip, </span>
<span id="cb639-7"><a href="replicating-adh-1.html#cb639-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">weights =</span> timepwt48,</span>
<span id="cb639-8"><a href="replicating-adh-1.html#cb639-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> df)</span></code></pre></div>
<pre><code>## Error in eval(mf[[wpos]], pf): object &#39;timepwt48&#39; not found</code></pre>
<div class="sourceCode" id="cb641"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb641-1"><a href="replicating-adh-1.html#cb641-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(felm_5)</span></code></pre></div>
<pre><code>## Error in h(simpleError(msg, call)): error in evaluating the argument &#39;object&#39; in selecting a method for function &#39;summary&#39;: object &#39;felm_5&#39; not found</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>Alternatively, you can define weights after <code>data = df</code>, but then you have to define the weights as <code>df$timepwft48</code> like so:</li>
</ol>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="replicating-adh-1.html#cb643-1" aria-hidden="true" tabindex="-1"></a>felm_5 <span class="ot">=</span> <span class="fu">felm</span>(relchg_avg_hhincwage_pc_pw <span class="sc">~</span> <span class="dv">1</span> <span class="sc">+</span> t2 <span class="sc">+</span></span>
<span id="cb643-2"><a href="replicating-adh-1.html#cb643-2" aria-hidden="true" tabindex="-1"></a>                l_shind_manuf_cbp <span class="sc">+</span> l_sh_popedu_c <span class="sc">+</span> l_sh_popfborn <span class="sc">+</span></span>
<span id="cb643-3"><a href="replicating-adh-1.html#cb643-3" aria-hidden="true" tabindex="-1"></a>                l_sh_empl_f <span class="sc">+</span> l_sh_routine33 <span class="sc">+</span> l_task_outsource <span class="sc">+</span></span>
<span id="cb643-4"><a href="replicating-adh-1.html#cb643-4" aria-hidden="true" tabindex="-1"></a>                reg_midatl <span class="sc">+</span> reg_encen <span class="sc">+</span> reg_wncen <span class="sc">+</span> reg_satl <span class="sc">+</span></span>
<span id="cb643-5"><a href="replicating-adh-1.html#cb643-5" aria-hidden="true" tabindex="-1"></a>                reg_escen <span class="sc">+</span> reg_wscen <span class="sc">+</span> reg_mount <span class="sc">+</span> reg_pacif</span>
<span id="cb643-6"><a href="replicating-adh-1.html#cb643-6" aria-hidden="true" tabindex="-1"></a>              <span class="sc">|</span> <span class="dv">0</span> <span class="sc">|</span> (d_tradeusch_pw <span class="sc">~</span> d_tradeotch_pw_lag) <span class="sc">|</span> statefip, </span>
<span id="cb643-7"><a href="replicating-adh-1.html#cb643-7" aria-hidden="true" tabindex="-1"></a>              <span class="at">data =</span> df,</span>
<span id="cb643-8"><a href="replicating-adh-1.html#cb643-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">weights =</span> df<span class="sc">$</span>timepwt48)</span>
<span id="cb643-9"><a href="replicating-adh-1.html#cb643-9" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(felm_5)</span></code></pre></div>
<pre><code>## 
## Call:
##    felm(formula = relchg_avg_hhincwage_pc_pw ~ 1 + t2 + l_shind_manuf_cbp +      l_sh_popedu_c + l_sh_popfborn + l_sh_empl_f + l_sh_routine33 +      l_task_outsource + reg_midatl + reg_encen + reg_wncen + reg_satl +      reg_escen + reg_wscen + reg_mount + reg_pacif | 0 | (d_tradeusch_pw ~      d_tradeotch_pw_lag) | statefip, data = df, weights = df$timepwt48) 
## 
## Weighted Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.2404 -0.1084 -0.0033  0.1114  2.8633 
## 
## Coefficients:
##                       Estimate Cluster s.e. t value Pr(&gt;|t|)    
## (Intercept)           60.67937      9.14264   6.637 4.54e-11 ***
## t2                    -9.05462      2.65665  -3.408 0.000672 ***
## l_shind_manuf_cbp      0.06791      0.08505   0.798 0.424746    
## l_sh_popedu_c          0.10292      0.11146   0.923 0.355954    
## l_sh_popfborn          0.07652      0.08050   0.950 0.342020    
## l_sh_empl_f           -0.21015      0.16952  -1.240 0.215297    
## l_sh_routine33        -1.01014      0.22888  -4.413 1.09e-05 ***
## l_task_outsource       5.56661      1.48578   3.747 0.000186 ***
## reg_midatl            -0.56489      1.55722  -0.363 0.716840    
## reg_encen             -2.61723      1.97713  -1.324 0.185797    
## reg_wncen              1.93904      1.63154   1.188 0.234846    
## reg_satl              -2.73867      1.49871  -1.827 0.067855 .  
## reg_escen              0.60288      1.53128   0.394 0.693856    
## reg_wscen             -1.68621      1.73888  -0.970 0.332354    
## reg_mount             -2.36081      1.40184  -1.684 0.092385 .  
## reg_pacif             -6.27918      2.02160  -3.106 0.001933 ** 
## `d_tradeusch_pw(fit)` -2.14156      0.59462  -3.602 0.000327 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 0.2791 on 1427 degrees of freedom
## Multiple R-squared(full model): 0.4278   Adjusted R-squared: 0.4214 
## Multiple R-squared(proj model): 0.4278   Adjusted R-squared: 0.4214 
## F-statistic(full model, *iid*):77.51 on 16 and 1427 DF, p-value: &lt; 2.2e-16 
## F-statistic(proj model): 44.53 on 16 and 47 DF, p-value: &lt; 2.2e-16 
## F-statistic(endog. vars):12.97 on 1 and 47 DF, p-value: 0.0007602</code></pre>
<p>And now we have the numbers reported in Column 2 of Panel A of Table 9 of the paper.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ggplot-solution.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["pp4rs-rstats.pdf", "pp4rs-rstats.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
